!function(e){"use strict";function t(e){const t=a(document.cookie,"; ").find(t=>{const{name:n}=r(t);return n===e});return!!t&&r(t).value}function r(e){const[t,...r]=a(e,"=");return{name:t,value:i(r)>0&&decodeURIComponent(r.join("="))}}var n=null;function o(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),n=new URL(e,r);for(const[o,i]of Object.entries(t))n.searchParams.set(o,i);return n.toString()}function i(e){return e.length}function a(e,t,r){return e.split(t,r)}function s(e){return e===n}var c="__Host-Cc-Session-Cookie",u="X-Cc-Session";function d(e){const t=e?.headers.get(u);t&&function(e,t,r={}){if(0===i(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===i(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const n=[`${e}=${encodeURIComponent(t)}`];r?.expires&&r?.expires instanceof Date&&n.push("expires="+r.expires.toUTCString()),r.maxAge&&n.push(`maxAge=${r.maxAge}`),r?.sameSite&&"string"==typeof r?.sameSite&&n.push(`SameSite=${r?.sameSite}`),r?.path&&n.push(`path=${r?.path}`),r?.domain&&n.push(`domain=${r?.domain}`),r?.httpOnly&&n.push("HttpOnly"),r?.secure&&n.push("Secure");const o=n.join("; ");document.cookie=o}(c,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function p(e,t=!1,r){return d(this),t||this&&401===this.status&&(location.href=o("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),r?.(),{message:e,succeeded:!1}}function h(e,t){return d(this),t?.(),{data:e,succeeded:!0}}function l(e=[],r="GET"){const n="application/json",o=new Headers({Accept:n,"Content-Type":n});for(const[t,s]of e)o.set(t,s);const i=t(c);i&&o.set(u,i);const a=t("__Host-cc-AuthToken");return a&&o.set("Authorization",a),{method:r,headers:o}}function m(e,t,r=!0){return r?e.push(t):-1}var f=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function g(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,r)=>{const n=[];for(const o of[t,r])m(n,o,o);return n.join("-")})}var w="reason",S=e.defineComponent({name:"OrderPage",data:()=>({order:n}),async created(){const e=new URLSearchParams(location.search).get("order-id");if(!e)return void(location.href=o("/",{[w]:"transactionid_not_found"}));const t=await this.getOrder(e);var r;t.succeeded?(this.order=t.data,(r=function(e,t=document){return t?t.querySelector(e):n}("[data-wtf-loader]"))&&r.classList.toggle("oculto",!0)):location.href=o("/",{[w]:"order_not_found"})},methods:{async getOrder(e){const t="Falha ao capturar o pedido";try{const r=await fetch(`https://xef5-44zo-gegm.b2.xano.io/api:vvvJTKZJ/order/${e}/details`,{...l(),priority:"high"});if(!r.ok){const e=await r.json();return p.call(r,e?.message??t)}const n=await r.json();return h.call(r,n)}catch(r){return p(t)}}},computed:{shipping(){const{order:e}=this;if(s(e))return n;const{cep:t,...r}=e.shipping_address;return{...r,cep:g(t),...e.shipping?.recipient&&{user_name:e.shipping?.recipient}}},billing(){const{order:e}=this;if(s(e))return n;const{cep:t,...r}=e.billing_address;return{...r,cep:g(t)}},getOrderShippingPrice(){return this.order?.shipping.price??0},getOrderShippingPriceFormatted(){return f.format(this.getOrderShippingPrice/100)},getOrderSubtotalPrice(){return this.order?.subtotal??0},getOrderSubtotalPriceFormatted(){return f.format(this.getOrderSubtotalPrice/100)},getOrderPrice(){return this.order?.total??0},getOrderPriceFormatted(){return f.format(this.getOrderPrice/100)},getParsedProducts(){const{order:e}=this;return e?e.items.map(({quantity:e,unit_amount:t,title:r,image_url:n})=>({title:r,quantity:e,unit_amount:f.format(t/100),final_price:f.format(Math.round(t*e)/100),image_style:`background-image: url('${n}');`})):[]},isPIXPayment(){return"pix"===this.order?.payment_method},email(){return this.order?.user.email??"-"},cpf(){return this.order?.user.cpf??"-"},phone(){return this.order?.user.phone??"-"}}});e.createApp(S).mount("#orderapp"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}(Vue);