!function(e){"use strict";function t(e){const t=k(document.cookie,"; ").find(t=>{const{name:r}=i(t);return r===e});return!!t&&i(t).value}function i(e){const[t,...i]=k(e,"=");return{name:t,value:S(i)>0&&decodeURIComponent(i.join("="))}}var r=Object.keys({AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"}),s="",n="/",a="POST",o="__Host-cc-AuthToken",d="__Host-Cc-Session-Cookie",l="X-Cc-Session";function h(e){const t=e?.headers.get(l);t&&function(e,t,i={}){if(0===S(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===S(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const r=[`${e}=${encodeURIComponent(t)}`];i?.expires&&i?.expires instanceof Date&&r.push("expires="+i.expires.toUTCString()),i.maxAge&&r.push(`maxAge=${i.maxAge}`),i?.sameSite&&"string"==typeof i?.sameSite&&r.push(`SameSite=${i?.sameSite}`),i?.path&&r.push(`path=${i?.path}`),i?.domain&&r.push(`domain=${i?.domain}`),i?.httpOnly&&r.push("HttpOnly"),i?.secure&&r.push("Secure");const s=r.join("; ");document.cookie=s}(d,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function c(e,t=!1,i){return h(this),t||this&&401===this.status&&(location.href=b("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),i?.(),{message:e,succeeded:!1}}function u(e,t){return h(this),t?.(),{data:e,succeeded:!0}}function p(e=[],i="GET"){const r="application/json",s=new Headers({Accept:r,"Content-Type":r});for(const[t,o]of e)s.set(t,o);const n=t(d);n&&s.set(l,n);const a=t(o);return a&&s.set("Authorization",a),{method:i,headers:s}}var g=null,m={block:"center",behavior:"smooth"};function f(e,t,i,r){if(e)return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function C(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):g}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function b(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),r=new URL(e,i);for(const[s,n]of Object.entries(t))r.searchParams.set(s,n);return r.toString()}function P(e){return JSON.stringify(e)}function y(e){return e.trim()}function V(e){return e.replace(/\D+/g,s)}function S(e){return e.length}function v(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function A(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function R(){return/^\d{5}-\d{3}$/}function M(){return/^\d{2}\/\d{2}\/\d{4}$/}function w(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function N(){return/^(\w{2,})(\s+(\w+))+$/}function E(e){return e instanceof HTMLInputElement}function F(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,s).replace(/[\u200B-\u200D\uFEFF]/g,s).replace(/[\u2060\u034F]/g,s)}function D(e,t){e&&e.focus(t)}function $(e,t){e&&e.scrollIntoView(t)}function k(e,t,i){return e.split(t,i)}function I(e){return e===g}function O(e,t){return("function"==typeof e?e():e).test(t)}function _(e,t,i=!0){return i?e.push(t):-1}function j(e,t){return e.includes(t)}var B=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function T(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const r=[];for(const s of[t,i])_(r,s,s);return r.join("-")})}function H(){return!1!==t(o)?"user":"guest"}var x="pix",L="ticket",G="creditcard",z=new Event("input"),U=new Event("blur"),Z=new WeakMap,K=e=>{const t=Z.get(e);t&&(t(),Z.delete(e))};function q(...e){return{mounted(t,i){const r=i.arg??"input",n=f(t,r,i=>{if(!i.isTrusted)return;const r=i.target;r.value=e.reduce((e,t)=>t(e),r.value??s),t.dispatchEvent(z)});Z.set(t,n)},unmounted:K}}var Y=[10,11],J="same",Q="diff",W="20133";function X(e){switch(e){case"03298":return"PAC";case"03220":return"Sedex";case W:return"Impresso";default:return"ERROR"}}var ee,te="https://xef5-44zo-gegm.b2.xano.io/api:vvvJTKZJ",ie=((ee=document.currentScript)?ee.getAttribute("data-public-key"):g)??"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoZ8+gUNjyc4RndTF0k5TIEFSL8gK6aSOPAdxzdMYGCkCYLAlfINFc6ZYK/yxIUKcZ13Ib00C5xOw0ucAE7xi1Lo+b9Xfxt94VNOS/zWz07vOWpfbThMRcgV4/ZurTULo2qdZ26BXq1fw+5j4GwW/9k44Rt/unyq2Q3FVy7a1MuZvKzwA5lYrt2HJAviKqHZm9YdqVZOCn+SM77903Aewc1XUo+SwTSwxcLE4jbjtJ8nE4cd5L1/hEVMmN5woTagtBHvv2BCTy2xZHrkCdGFAGHK2jPYJk4YkNX6fpSKeQRF49UqhxkGRulwKApspjMB8qrWu0ivHn4SZz5kwZJcKhwIDAQAB";if(I(ie))throw new Error("`Public key was not provided");function re(e,t){return{method:e,label:t}}function se(e,t){return{token:e,label:t}}function ne(e,t,i=!1){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function ae({cep:e,signal:t}){const i="Não foi possível encontrar o endereço";try{const r=await fetch(`${te}/address`,{...p([],a),signal:t,priority:"high",body:P({cep:V(e)})});if(!r.ok){const e=await r.json();return c.call(r,e?.code??i)}const s=await r.json();return u.call(r,s)}catch(r){return c(i)}}var oe=e.defineComponent({name:"CheckoutComponent",setup:()=>({customerCPF:e.ref(s),customerMail:e.ref(s),customerPhone:e.ref(s),customerBirthDate:e.ref(s),customerCreditCardHolder:e.ref(s),customerCreditCardNumber:e.ref(s),customerCreditCardDate:e.ref(s),customerCreditCardCVV:e.ref(s),billingCEP:e.ref(s),billingAddress:e.ref(s),billingNumber:e.ref(s),billingComplement:e.ref(s),billingNeighborhood:e.ref(s),billingCity:e.ref(s),billingState:e.ref(s),shippingRecipient:e.ref(s),shippingCEP:e.ref(s),shippingAddress:e.ref(s),shippingNumber:e.ref(s),shippingComplement:e.ref(s),shippingNeighborhood:e.ref(s),shippingCity:e.ref(s),shippingState:e.ref(s),customerMailRef:e.ref(g),customerBirthDateRef:e.ref(g),customerCPFRef:e.ref(g),customerPhoneRef:e.ref(g),paymentMethodMessageRef:e.ref(g),customerCreditCardHolderRef:e.ref(g),customerCreditCardNumberRef:e.ref(g),customerCreditCardDateRef:e.ref(g),customerCreditCardCVVRef:e.ref(g),billingCEPRef:e.ref(g),billingAddressRef:e.ref(g),billingNumberRef:e.ref(g),billingNeighborhoodRef:e.ref(g),billingCityRef:e.ref(g),billingStateRef:e.ref(g),deliveryPlaceMessageRef:e.ref(g),shippingRecipientRef:e.ref(g),shippingCEPRef:e.ref(g),shippingAddressRef:e.ref(g),shippingNumberRef:e.ref(g),shippingNeighborhoodRef:e.ref(g),shippingCityRef:e.ref(g),shippingStateRef:e.ref(g),installmentsMessageRef:e.ref(g),shippingMethodMessageRef:e.ref(g),generalErrorMessageRef:e.ref(g),deliveryBillingAddressErrorMessage:e.ref(g),deliveryPlaceAddressErrorMessage:e.ref(g),installment:e.shallowRef(g),errorMessage:e.ref(g),paymentMethods:e.shallowRef([re(G,"Cartão de crédito"),re(L,"Boleto"),re(x,"PIX")]),deliveryPlaces:e.shallowRef([se(J,"Mesmo endereço de cobrança do cartão"),se(Q,"Entregar em um endereço diferente")]),debouncedOrderPrice:g}),data:()=>({submitted:!1,isPagSeguroLoaded:!1,cart:g,deliveryPlace:g,selectedPaymentMethod:g,selectedShippingMethod:g,selectedInstallmentOption:g,isSubscriber:!1,visitedFields:[],detailedShipping:g,hasPendingPayment:!1,couponCode:g}),created(){this.getData({cep:localStorage.getItem("contra_corrente_cep")}).then(e=>{if(!e.succeeded)return;const{user:t,cart:i,address:r,detailed_shipping:n}=e.data;t&&(this.customerMail=t.email,this.customerCPF=t.cpf??s,this.customerPhone=t.phone??s,this.customerBirthDate=t.birthDate??s,this.isSubscriber=t.is_subscriber,this.shippingRecipient=t.name),r&&(this.shippingCEP=T(r.cep),this.shippingAddress=r.logradouro,this.shippingNeighborhood=r.bairro,this.shippingCity=r.localidade,this.shippingState=r.uf,this.billingCEP=T(r.cep),this.billingAddress=r.logradouro,this.billingNeighborhood=r.bairro,this.billingCity=r.localidade,this.billingState=r.uf),n&&(this.detailedShipping=n),this.cart=i}).finally(()=>{this.$watch("shippingCEP",async(e,t,i)=>{if(!O(R,e))return;const r=new AbortController;i(()=>r.abort()),await this.captureAddress("shipping",e,t,r.signal)||$(this.shippingCEPRef,m)}),this.$watch("billingCEP",async(e,t,i)=>{if(!O(R,e))return;const r=new AbortController;i(()=>r.abort()),await this.captureAddress("billing",e,t,r.signal)||$(this.billingCEPRef,m)}),C(!1)}),this.debouncedOrderPrice=function(e,t=500){let i=g;return function(...r){i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,r)},t)}}(()=>{this.refreshInstallments()},500)},methods:{async getData({cep:e}){const t="Houve uma falha ao inicializar o checkout",i=new URL(`${te}/checkout/${H()}`);e&&i.searchParams.set("cep",e);try{const e=await fetch(i,{...p(),priority:"high"});if(!e.ok){const i=await e.json();return c.call(e,i?.message??t)}const r=await e.json();return u.call(e,r)}catch(r){return c(t)}},async getShippingPriceAndDeadline(e){const t="Houve uma falha ao buscar os dados de entrega";try{const i=await fetch(`${te}/get_delivery_price_deadline`,{...p([],a),body:P({cep:e})});if(!i.ok){const e=await i.json();return c.call(i,e?.message??t)}const r=await i.json();return u.call(i,r)}catch(i){return c(t)}},setSelectedPaymentMethod(e){this.selectedPaymentMethod!==e&&(e!==G?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguroLibrary(),this.deliveryPlace=g,this.selectedPaymentMethod=e)},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===J&&O(R,this.billingCEP)&&this.isBillingAddressGroupValid?ae({cep:V(this.billingCEP)}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=e.message)}):this.deliveryPlaceAddressErrorMessage=g,this.deliveryPlace=e)},setDeliveryMethod(e){this.selectedShippingMethod=e},clearCreditCardData(){this.customerCreditCardHolder=s,this.customerCreditCardNumber=s,this.customerCreditCardDate=s,this.customerCreditCardCVV=s},isVisitedField(e){return j(this.visitedFields,e)},setVisitedField(e){return _(this.visitedFields,e,!this.isVisitedField(e))},triggerValidations(){const{notIgnoredFields:e}=this;for(const{field:t}of e)E(t)&&t.dispatchEvent(U)},async handlePayment(e){e.preventDefault();const{hasPendingPayment:t,selectedPaymentMethod:i}=this;if(t)return;if(this.triggerValidations(),!this.submitted)return this.submitted=!0,this.$nextTick(()=>this.handlePayment(e));const{firstInvalidField:r}=this;if(r&&r.field){const{field:e}=r;return $(e,m),void(E(e)&&setTimeout(D,500,e,{preventScroll:!1}))}this.hasPendingPayment=!C(!0);const s=await this.handlePostPayment(i);if(!s.succeeded)return this.errorMessage=s.message,this.hasPendingPayment=!C(!1),this.$nextTick(()=>{$(this.generalErrorMessageRef,m),setTimeout(()=>{this.errorMessage=g},5e3)});const a={[x]:"pix",[L]:"confirmacao-do-pedido",[G]:"confirmacao-do-pedido"}[i];localStorage.removeItem("editora_contracorrente_cart_items"),location.href=b(["/pagamento",a].join(n),{"order-id":s.data.transactionid})},async handlePostPayment(e){const t="Houve uma falhar ao finalizar o seu pedido",{couponCode:i,deliveryPlace:r,selectedShippingMethod:s,isCreditCard:n,customerCreditCardHolder:o,shippingRecipient:d,customerCPF:l,customerMail:h,customerPhone:g,customerBirthDate:m}=this;try{const f=await fetch(`${te}/payment/process/${e}/${H()}`,{...p([],a),body:P({...!I(i)&&{coupon_code:i},...!I(r)&&{delivery_place:r},shipping_method:s,customer:{name:n?o:d,cpf:l,email:h,phone:g,birthDate:m,...this.getParsedAddresses},...e===G&&{credit_card_info:this.creditCardAdditionalInfo}})});if(!f.ok){const e=await f.json();return c.call(f,e?.message??t)}const C=await f.json();return u.call(f,C)}catch(f){return c(t)}},loadPagSeguroLibrary(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},async getInstallments(){const e="Falha ao capturar o parcelamento",t=H();try{const i=await fetch(`${te}/calculate_fees/${t}`,{...p([],a),priority:"high",body:P({amount:this.getOrderPrice,cardbin:V(this.customerCreditCardNumber).slice(0,8)})});if(!i.ok){const t=await i.json();return c.call(i,t?.message??e)}const r=await i.json();return u.call(i,r)}catch(i){return c(e)}},async captureAddress(e,t,i,r){if(!O(R,t)||t===i)return!1;const s=`${e}CEP`,n=await ae({cep:t,signal:r});return n.succeeded?(this[`${e}Address`]=n.data.logradouro,this[`${e}Neighborhood`]=n.data.bairro,this[`${e}State`]=n.data.uf,this[`${e}City`]=n.data.localidade,!0):(this.setVisitedField(s),this.clearAddress(e),!1)},clearAddress(e){this[`${e}CEP`]=s,this[`${e}Address`]=s,this[`${e}Neighborhood`]=s,this[`${e}State`]=s,this[`${e}City`]=s},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=g;const e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){this.selectedInstallmentOption!==e&&(this.selectedInstallmentOption=e)}},computed:{hasSelectedPaymentMethod(){return!I(this.selectedPaymentMethod)},isCreditCard(){return this.selectedPaymentMethod===G},hasSelectedDeliveryPlace(){return!I(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===J},isDiffAddress(){return this.deliveryPlace===Q},installmentPrice(){const{installment:e,selectedInstallmentOption:t}=this;if(!e||!t)return 0;const i=e.find(e=>e.installments===t);return i?.installment_value??0},hasSelectedAddress(){return!I(this.deliveryPlace)},renderedProducts(){const{cart:e,betterPriceSystem:t}=this;return e?e.items.map(({quantity:e,image_url:i,name:r,slug:s,is_pod:n,...a})=>{const o=a[t];return{name:r,slug:s,is_pod:n,quantity:e,price:B.format(o/100),final_price:B.format(Math.round(o*e)/100),image_style:`background-image: url('${i}')`}}):[]},isPersonalDataValid(){const{submitted:e,customerMailValidation:t,customerBirthDateValidation:i,customerCPFValidation:r,customerPhoneValidation:s}=this;return!e||[t,i,r,s].every(Boolean)},customerMailValidation(){return ne(this.customerMailRef,!this.isVisitedField("customerMail")||O(v,this.customerMail))},customerBirthDateValidation(){const{customerBirthDate:e}=this;return ne(this.customerBirthDateRef,!this.isVisitedField("customerBirthDate")||O(M,e)&&function(e){const[t,i,r]=k(e,n),s=new Date(`${r}-${i}-${t}T00:00:00`);if("Invalid Date"===s.toString())return!1;const a=s.getUTCDate()===Number(t),o=s.getUTCMonth()+1===Number(i),d=s.getUTCFullYear()===Number(r);return a&&o&&d}(e))},customerCPFValidation(){const{customerCPF:e}=this;return ne(this.customerCPFRef,!this.isVisitedField("customerCPF")||O(w,e)&&function(e){if(11!==S(e=V(e))||O(/^(\d)\1{10}$/,e))return!1;const t=Y.map((t,i)=>{const r=i?10:9,s=11-[...e.slice(0,r)].map(Number).reduce((e,i,r)=>e+i*(t-r),0)%11;return s>9?0:s});return e.endsWith(t.join(s))}(e))},customerPhoneValidation(){return ne(this.customerPhoneRef,!this.isVisitedField("customerPhone")||O(A,this.customerPhone))},paymentMethodValidation(){return ne(this.paymentMethodMessageRef,this.hasSelectedPaymentMethod)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},customerCreditCardHolderValidation(){return ne(this.customerCreditCardHolderRef,!this.isVisitedField("customerCreditCardHolder")||O(N,y(this.customerCreditCardHolder)),!this.isCreditCard)},customerCreditCardNumberValidation(){return ne(this.customerCreditCardNumberRef,!this.isVisitedField("customerCreditCardNumber")||O(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,this.customerCreditCardNumber),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return ne(this.customerCreditCardDateRef,!this.isVisitedField("customerCreditCardDate")||O(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=k(e,n);if(2!==S(t))return!1;const[i,r]=t,s=parseInt(i,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a)||s<1||s>12)return!1;const o=new Date;return new Date(2e3+(a<100?a:0),s,0,23,59,59)>o}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return ne(this.customerCreditCardCVVRef,!this.isVisitedField("customerCreditCardCVV")||O(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isBillingAddressGroupValid(){return I(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},billingCEPValidation(){return ne(this.billingCEPRef,!this.isVisitedField("billingCEP")||O(R,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return ne(this.billingAddressRef,!this.isVisitedField("billingAddress")||S(this.billingAddress)>2,!this.isCreditCard)},billingNumberValidation(){return ne(this.billingNumberRef,!this.isVisitedField("billingNumber")||S(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return ne(this.billingNeighborhoodRef,!this.isVisitedField("billingNeighborhood")||S(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return ne(this.billingCityRef,!this.isVisitedField("billingCity")||S(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return ne(this.billingStateRef,!this.isVisitedField("billingState")||j(r,this.billingState),!this.isCreditCard)},deliveryPlaceValidation(){return ne(this.deliveryPlaceMessageRef,this.hasSelectedDeliveryPlace&&I(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return ne(this.shippingRecipientRef,!this.isVisitedField("shippingRecipient")||O(/^(\w{2,})(\s+(\w+))+$/,F(this.shippingRecipient)),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return ne(this.shippingCEPRef,!this.isVisitedField("shippingCEP")||O(R,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return ne(this.shippingAddressRef,!this.isVisitedField("shippingAddress")||S(this.shippingAddress)>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return ne(this.shippingNumberRef,!this.isVisitedField("shippingNumber")||S(this.shippingNumber)>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return ne(this.shippingNeighborhoodRef,!this.isVisitedField("shippingNeighborhood")||S(this.shippingNeighborhood)>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return ne(this.shippingCityRef,!this.isVisitedField("shippingCity")||S(this.shippingCity)>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return ne(this.shippingStateRef,!this.isVisitedField("shippingState")||j(r,this.shippingState),!this.shouldValidateShippingAddress)},installmentGroupValidation(){return ne(this.installmentsMessageRef,!I(this.selectedInstallmentOption),!this.isCreditCard||!this.paymentMethodValidation.valid)},shippingMethodValidation(){return ne(this.shippingMethodMessageRef,!I(this.selectedShippingMethod),!this.showShippingMethod)},shouldValidateShippingAddress(){return!this.isCreditCard||this.hasSelectedDeliveryPlace&&!this.isSameAddress},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthDateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.shippingMethodValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>!e)},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??g},deliveryOptions(){const{detailedShipping:e}=this;return I(e)?[]:e.map(({coProduto:e,pcFinal:t,prazoEntrega:i})=>{const r=e===W?"entre 20 e 40 dias":`${i} dias`;return{coProduto:e,label:[X(e),B.format(t/100),r].join(" | ")}})},hasShippingDetails(){return e=this.detailedShipping,Array.isArray(e)&&S(this.detailedShipping)>0;var e},showShippingMethod(){const{isCreditCard:e,hasShippingDetails:t,selectedPaymentMethod:i,hasSelectedDeliveryPlace:r}=this;return!I(i)&&(t&&j([x,L],i)||e&&r)},getParsedAddresses(){const e=e=>j(r,e)?e:s,t=e=>y(e).replace(/-+/g,s),i=t(this.shippingComplement),n={zipPostalCode:V(this.shippingCEP),street:this.shippingAddress,number:this.shippingNumber,neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState),...i&&{complement:i},recipient:this.shippingRecipient},a=t(this.billingComplement),o={zipPostalCode:V(this.billingCEP),street:this.billingAddress,number:this.billingNumber,neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState),...a&&{complement:a}};return this.isCreditCard?{billingaddress:o,shippingaddress:this.isDiffAddress?n:o}:{shippingaddress:n}},creditCardAdditionalInfo(){const{installmentPrice:e,getCreditCardToken:t,customerCreditCardHolder:i,selectedInstallmentOption:r}=this;return{holderName:i,creditCardToken:t.encryptedCard??s,numberOfPayments:r,installmentValue:e}},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:g};if(!O(/^\d{2}\/\d{2}$/,this.customerCreditCardDate)||S(this.customerCreditCardCVV)<3)return{errors:[],hasErrors:!1,encryptedCard:g};const{customerCreditCardCVV:e,customerCreditCardHolder:t,customerCreditCardNumber:i}=this,[r,s]=k(this.customerCreditCardDate,n),a=1e3*Math.floor((new Date).getFullYear()/1e3);return window.PagSeguro.encryptCard({expMonth:r,expYear:(a+parseInt(s)).toString(),holder:t,securityCode:e,number:V(i),publicKey:ie})},showInstallmentSection(){return this.isCreditCard&&S(this.installment??[])>0},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:B.format(t/100)})):[]},betterPriceSystem:()=>"price",showDeliveryPrice(){return S(this.deliveryOptions)>0&&!I(this.selectedShippingMethod)},getOrderSubtotal(){const{cart:e,betterPriceSystem:t}=this;if(!e)return 0;const{order_price:i,order_full_price:r}=e;return{price:i,full_price:r}[t]},getOrderSubtotalFormatted(){return B.format(this.getOrderSubtotal/100)},getOrderPrice(){return function(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}([this.getOrderSubtotal,this.getShippingPrice].reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return B.format(this.getOrderPrice/100)},getShippingPrice(){const{detailedShipping:e,selectedShippingMethod:t}=this;if(!e||!t)return 0;const i=e.find(e=>e.coProduto===t);return i?i.pcFinal:0},getShippingPriceFormatted(){return B.format(this.getShippingPrice/100)}},watch:{getOrderPrice:{immediate:!0,handler:function(){this.debouncedOrderPrice?.()}},getCreditCardToken(e,t){e.hasErrors||e.hasErrors===t.hasErrors||this.refreshInstallments()}},directives:{trim:q(y),numbersOnly:q(V),visitedField:{mounted(e,{value:t,instance:i}){const r=f(e,"blur",()=>{i.setVisitedField(t),Z.delete(e)},{once:!0});Z.set(e,r)},unmounted:K},maskDate:q(V,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,r)=>[t,i,r].filter(Boolean).join(n))}),maskCpf:q(V,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,r,n)=>{const a=[];return _(a,`${t}`,t),_(a,`.${i}`,i),_(a,`.${r}`,r),_(a,`-${n}`,n),a.join(s)})}),maskPhone:q(V,function(e){const t=(e,t,i,r)=>{const n=[];return _(n,`(${t}`,t),_(n,`) ${i}`,i),_(n,`-${r}`,r),n.join(s)};return S(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),uppercase:q(function(e){return e.toUpperCase()}),normalize:q(F),removeDuplicatedSpaces:q(function(e){return e.replace(/\s{2,}/g," ")}),maskCreditCardNumber:q(V,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,r,s)=>{const n=[];for(const a of[t,i,r,s])_(n,a,a);return n.join(" ")})}),maskCreditCardDate:q(V,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const r=[];for(const s of[t,i])_(r,s,s);return r.join(n)})}),maskCep:q(V,T)}});e.createApp(oe).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}(Vue);