!function(){"use strict";var e="POST",t="https://xef5-44zo-gegm.b2.xano.io",n="__Host-cc-AuthToken",i="__Host-Cc-Session-Cookie",a="X-Cc-Session";function r(e){const t=e?.headers.get(a);t&&function(e,t,n={}){if(0===k(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===k(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const i=[`${e}=${encodeURIComponent(t)}`];n?.expires&&n?.expires instanceof Date&&i.push("expires="+n.expires.toUTCString()),n.maxAge&&i.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&i.push(`SameSite=${n?.sameSite}`),n?.path&&i.push(`path=${n?.path}`),n?.domain&&i.push(`domain=${n?.domain}`),n?.httpOnly&&i.push("HttpOnly"),n?.secure&&i.push("Secure");const a=i.join(P);document.cookie=a}(i,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function o(e,t=!1,n){return r(this),t||this&&401===this.status&&(location.href=w("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),n?.(),{message:e,succeeded:!1}}function s(e,t){return r(this),t?.(),{data:e,succeeded:!0}}function c(e=[],t="GET"){const r="application/json",o=new Headers({Accept:r,"Content-Type":r});for(const[n,i]of e)o.set(n,i);const s=E(i);s&&o.set(a,s);const c=E(n);return c&&o.set("Authorization",c),{method:t,headers:o}}var u=null,d="oculto";function l(e,t=document){return t?t.querySelector(e):u}function f(e,t,n,i){if(e)return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function p(e,...t){e&&e.classList.add(...t)}function h(e,...t){e&&e.classList.remove(...t)}function m(e,t,n){return!!e&&e.classList.toggle(t,n)}function g(e,t){e&&(e.textContent="string"==typeof t?t:t.toString())}function w(e,t={}){const n=new URL(`${location.protocol}//${location.hostname}`),i=new URL(e,n);for(const[a,r]of Object.entries(t))i.searchParams.set(a,r);return i.toString()}function y(e){return JSON.stringify(e)}function v(e){return e.replace(/\D+/g,"")}function k(e){return e.length}function b(){return/^\d{5}-\d{3}$/}function S(e,t,n){return e.split(t,n)}function C(e){return e===u}var P="; ";function E(e){const t=S(document.cookie,P).find(t=>{const{name:n}=_(t);return n===e});return!!t&&_(t).value}function _(e){const[t,...n]=S(e,"=");return{name:t,value:k(n)>0&&decodeURIComponent(n.join("="))}}function L(e,t,n){return e?t.push(n):-1}var I=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function q(e,t,n){return Math.max(e,Math.min(t,n))}var R={PRICE:"price",FULL_PRICE:"full_price"},U=location.pathname.split("/").at(-1);if(!U)throw new Error("Slug do produto não foi encontrado");var $=l("[data-sku-selector]");if(!$)throw new Error("Impossível realizar a seleção de SKUs");var j="strikethrough",x=$.parentElement,D=l("[data-wtf-sku-price]"),T=l("[data-wtf-sku-full-price]"),F=l("[data-wtf-trigger-add-cep]"),H=l("#spp-calculo-do-cep"),O=l("#spp-campo-de-cep"),M=l("#spp-mensagem-de-erro-campo-de-cep"),A=l("#spp-custo-do-frete-bloco"),B=l("#spp-custo-do-frete");l("[data-wtf-subscriber-view-price]");var N=l("#spp-custo-do-frete-mudar-cep");f(l("[data-wtf-quantity-minus]"),"click",e=>{J(-1)}),f(l("[data-wtf-quantity-plus]"),"click",e=>{J(1)}),f(F,"click",e=>{m(l("[data-wtf-trigger-add-cep-container]"),d,!0),h(H,d)}),f(O,"input",async e=>{if(!e.isTrusted)return;const t=e.target;if(!(t instanceof HTMLInputElement))return;const n=v(t.value).replace(/^(\d{0,5})(\d{0,3})/,(e,t,n)=>{const i=[];for(const a of[t,n])L(a,i,a);return i.join("-")});var i,a;t.value=n,z.shippingCEP=(a=n,("function"==typeof(i=b)?i():i).test(a)?v(n):u)}),f(l("[data-wtf-buy-now]"),"click",async e=>{e.isTrusted&&await K(!0)}),f(l("[data-wtf-add-to-cart]"),"click",async e=>{e.isTrusted&&await K()});var z=new Proxy({selectedSku:u,shippingCEP:u,quantity:1,isSubscriber:!1,skus:[],isDeliveryLoading:!1,deliveryPrice:u,isManipulatingCart:!1},{get(e,t){switch(t){case R.PRICE:case R.FULL_PRICE:{const e=V();return e?e[t]/100:0}case"singleItemPrice":{const t=V();if(!t)return 0;const{[R.PRICE]:n,[R.FULL_PRICE]:i}=t,a=q(0,1,.7);return e.isSubscriber?G(i,n)?n:i*a:n}case"final_price":{const{quantity:t,deliveryPrice:n}=e,i=n??0;return(z.singleItemPrice*t+i)/100}case"hasSamePrices":{const e=V();return!!e&&e[R.PRICE]===e[R.FULL_PRICE]}}return Reflect.get(e,t)},set(e,t,n){const i=Reflect.set(e,t,n);switch(t){case"selectedSku":!function(){const e=document.createDocumentFragment();for(const t of z.skus){const n=$.cloneNode(!0),i=t.sku_id===z.selectedSku;g(n,t.variation_type),m(n,"selecionado",i),f(n,"click",e=>{e.preventDefault(),e.stopPropagation(),i||(z.selectedSku=t.sku_id,1!==z.quantity&&(z.quantity=1))}),e.appendChild(n)}x.replaceChildren(e)}(),function(){const{price:e,full_price:t,isSubscriber:n,hasSamePrices:i,singleItemPrice:a}=z;g(D,I.format(e)),g(T,I.format(i?0:t));const r=G(t,e),o=m(l("[data-wtf-full-price-view]"),d,n&&i);m(D,j,n&&r),m(l("[data-wtf-price-view]"),d,n&&(!i||r)),m(D,j,n&&o),m(l("[data-wtf-subscriber-view-price]"),d,!n),g(l("[data-wtf-sku-subscriber-price]"),I.format(a/100))}(),X();break;case"quantity":{g(l("[data-wtf-quantity-value]"),z.quantity),X();const{shippingCEP:t}=e;C(t)||8!==k(t)||W()}break;case"shippingCEP":W();break;case"isDeliveryLoading":break;case"deliveryPrice":h(A,d),g(B,I.format(n/100)),f(N,"click",e=>{e.isTrusted&&Q()},{once:!0}),X();break;case"isSubscriber":X()}return i}});async function K(n){if(z.isManipulatingCart)return;z.isManipulatingCart=!0;const{quantity:i,selectedSku:a}=z;if(!a)throw new Error("Nenhum SKU foi selecionado");const r=await async function(n){const i="Houve uma falha na adição do produto";try{const a=await fetch(`${t}/api:b9-USIEf/cart/handle`,{...c([],e),body:y(n),priority:"high",keepalive:!0});if(!a.ok){const e=await a.json();return o.call(a,e?.message??i)}const r=await a.json();return s.call(a,r)}catch(a){return o(i)}}({item:{quantity:i,sku_id:a,reference_id:U},operation:"add",...n&&{immediate:n}});if(z.isManipulatingCart=!1,!r.succeeded)return alert(r.message??"Não foi possível adicionar o produto no seu carrinho");z.quantity=1}function G(e,t){return e*q(0,1,.7)>=t}function J(e){if(z.isDeliveryLoading)return;const t=V();if(!t)throw new Error("SKU was not specified");const n=q(1,10,q(1,z.quantity+e,t.inventory));n!==z.quantity&&(z.quantity=n)}function X(){g(l("[data-wtf-sku-final-price]"),I.format(z.final_price))}function Q(){O&&(O.value=""),z.shippingCEP=u,z.deliveryPrice=u,p(M,d),h(H,d),p(A,d),g(B,I.format(0))}function V(){const{skus:e,selectedSku:t}=z;return e.find(e=>t===e.sku_id)}async function W(){if(z.isDeliveryLoading)return;const{quantity:n,shippingCEP:i}=z;if(C(i)||!U)throw new Error("Invalid parameters provided to `getDeliveryInfo` function");const a=await async function(n){const i="Houve uma falha ao buscar os dados de entrega";z.isDeliveryLoading=!0;try{const a=await fetch(`${t}/api:_4BO6C7F/delivery-price`,{...c([],e),body:y(n)});if(!a.ok){const e=await a.json();return o.call(a,e?.message??i,!0)}const r=await a.json();return s.call(a,r)}catch(a){return o(i)}finally{z.isDeliveryLoading=!1}}({quantity:n,cep:i,product_slug:U});if(p(H,d),!a.succeeded)return navigator.vibrate?.([50,20,50]),g(M,a.message),h(M,d),setTimeout(Q,4e3);z.deliveryPrice=a.data.pcFinal}var Y=[async function(e){const n="Houve uma falha ao buscar os dados do usuário";try{const i=await fetch(`${t}/api:_4BO6C7F/product/${e}`,{...c()});if(!i.ok){const e=await i.json();return o.call(i,e?.message??n,!0)}const a=await i.json();return s.call(i,a)}catch(i){return o(n)}}(U).then(function(e){e.succeeded?(z.skus=e.data.skus,z.selectedSku=e.data.skus.at(0)?.sku_id??u):location.href=w("/",{reason:"product_not_founded"})})];E(n)&&Y.push(async function(){const e="Houve uma falha ao buscar os dados do usuário";try{const n=await fetch(`${t}/api:_4BO6C7F/user`,{...c()});if(!n.ok){const t=await n.json();return o.call(n,t?.message??e,!0)}const i=await n.json();return s.call(n,i)}catch(n){return o(e)}}().then(function(e){e.succeeded&&(z.isSubscriber=e.data.subscriber)})),Promise.allSettled(Y),window.addEventListener("pageshow",e=>{e.persisted&&location.reload()})}();