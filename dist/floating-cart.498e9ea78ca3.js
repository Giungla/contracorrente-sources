!function(){"use strict";function t(t){const n=y(document.cookie,"; ").find(n=>{const{name:a}=e(n);return a===t});return!!n&&e(n).value}function e(t){const[e,...n]=y(t,"=");return{name:e,value:w(n)>0&&decodeURIComponent(n.join("="))}}var n="carrinhoflutuante--visible",a="__Host-cc-AuthToken",r="__Host-Cc-Session-Cookie",o="X-Cc-Session";function i(t){const e=t?.headers.get(o);e&&function(t,e,n={}){if(0===w(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===w(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const a=[`${t}=${encodeURIComponent(e)}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.domain}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");const r=a.join("; ");document.cookie=r}(r,e,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function c(t,e=!1,n){return i(this),e||this&&401===this.status&&(location.href=function(t,e={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(t,n);for(const[r,o]of Object.entries(e))a.searchParams.set(r,o);return a.toString()}("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),n?.(),{message:t,succeeded:!1}}function s(t,e){return i(this),e?.(),{data:t,succeeded:!0}}function u(e=[],n="GET"){const i="application/json",c=new Headers({Accept:i,"Content-Type":i});for(const[t,a]of e)c.set(t,a);const s=t(r);s&&c.set(o,s);const u=t(a);return u&&c.set("Authorization",u),{method:n,headers:c}}var f=null,l="oculto";function d(t,e=document){return e?e.querySelector(t):f}function p(t,e,n,a){if(t)return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function h(t,...e){t&&t.classList.add(...e)}function m(t,e,n){return!!t&&t.classList.toggle(e,n)}function g(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function w(t){return t.length}function y(t,e,n){return t.split(e,n)}var v=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function b(t,e=0){const n=Math.pow(10,e);return Math.round(t*n)/n}var k="increase";function C(){return!1!==t(a)?"user":"guest"}var S="price",_="full_price",$=d("#carrinho-flutuante");if(!$)throw new Error("Could not find floating cart");var x="https://xef5-44zo-gegm.b2.xano.io/api:b9-USIEf",O={cart:f,fetched:f,isPending:!1,isCartOpened:!0,isSubscriber:!1},P=d("[data-wtf-floating-cart-item]"),A=d("[data-wtf-floating-cart-item-wrapper]"),E=d("[data-wtf-floating-cart-empty-cart]"),R=d("[data-wtf-floating-cart-total]"),j=new Proxy(O,{get:(t,e)=>Reflect.get(t,e),set(t,e,n){const a=Reflect.set(t,e,n);switch(e){case"isCartOpened":L();break;case"cart":!function(){const{cart:t}=j;if(!t)return;const{items:e,cart_items:n,is_subscriber:a=!1}=t;if(!function(t){return Array.isArray(t)}(e)||!P||!A)return;const r=0===n;if(m(R,l,r),m(d("[data-wtf-floating-cart-checkout-button]",$),l,r),!m(E,l,!r))return g(d("[data-wtf-floating-cart-items-indicator]"),n),A.replaceChildren();const o=document.createDocumentFragment(),i=a&&function(t){const e=t.reduce((t,e)=>(t[S]+=e[S],t[_]+=.7*e[_],t),{[S]:0,[_]:0});return e[S]===e[_]||e[_]>e[S]?S:_}(e.map(({price:t,full_price:e})=>({price:t,full_price:e})));let c=0;switch(i){case!1:case S:c=t.order_price;break;case _:c=Math.round(.7*t.order_full_price)}g(R,v.format(b(c/100,2)));for(const{slug:s,image_url:u,quantity:f,price:l,full_price:m,name:w,sku_id:y}of e){const t=P.cloneNode(!0);U({price:l,full_price:m},t,i),g(d("[data-wtf-floating-cart-item-product-name]",t),w),g(d("[data-wtf-floating-cart-item-quantity]",t),f);const e=d("[data-wtf-floating-cart-item-image]",t);e&&(e.style.backgroundImage=`url('${u}')`);const n={sku_id:y,reference_id:s},a=[["delete","data-wtf-floating-cart-item-remove"],[k,"data-wtf-floating-cart-item-plus-button"],["decrease","data-wtf-floating-cart-item-minus-button"]];for(const[r,o]of a){const e=d(`[${o}]`,t);r===k&&f>=10?h(e,"onedge"):p(e,"click",t=>H.call(t,r,n))}o.appendChild(t)}g(d("[data-wtf-floating-cart-items-indicator]"),n),A?.replaceChildren(o)}()}return a}});async function L(){if(!j.isCartOpened)return;j.isPending=!0;const t=await async function(){const t="Houve uma falha ao buscar o seu carrinho",e=C();try{const n=await fetch(`${x}/cart/get/${e}`,{...u(),priority:"high"});if(!n.ok){const e=await n.json();return c.call(n,e?.message??t)}const a=await n.json();return s.call(n,a)}catch(n){return c(t)}}();j.fetched??=!0,j.isPending=!1,t.succeeded&&(j.cart=t.data)}function U(t,e,n=!1){const a=d("[data-wtf-floating-cart-item-product-price-original]",e),r=d("[data-wtf-floating-cart-item-product-price]",e);let o=0,i=0;switch(n){case!1:case S:[o,i]=[t[S],t[_]];break;case _:{const e=Math.max(.7,0);[o,i]=[Math.round(t[_]*e),t[_]]}}const c=o!==i;if(g(r,v.format(b(o/100,2))),!c)return h(a,l);g(a,v.format(b(i/100,2)))}async function H(t,e){this.preventDefault(),this.stopPropagation(),await async function(t,e){if(j.isPending)return;j.isPending=!0;const n=await async function(t,e){const n="Houve uma falha ao buscar o seu carrinho",a=C();try{const o=await fetch(`${x}/cart/handle/${a}`,{...u([],"POST"),priority:"high",keepalive:!0,body:(r={item:t,operation:e},JSON.stringify(r))});if(!o.ok){const t=await o.json();return c.call(o,t?.message??n)}const i=await o.json();return s.call(o,i)}catch(o){return c(n)}var r}({...e,quantity:1},t);j.isPending=!1,n.succeeded&&(j.cart=n.data)}(t,e)}if(new MutationObserver(t=>{const e=t[0].target,a=(o=n,!!(r=e)&&r.classList.contains(o));var r,o;j.isCartOpened=a,window.scrollTo({top:0,behavior:"instant"}),document.body.style.overflow=a?"hidden":"unset"}).observe($,{attributes:!0,attributeFilter:["class"]}),!A)throw new Error("Product wrapper is missing");document.querySelectorAll("[data-wtf-botao-carrinho-flutuante]").forEach(t=>{p(t,"click",()=>m($,n),{passive:!0})}),L().then(()=>j.isCartOpened=!1)}();