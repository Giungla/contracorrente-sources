!function(e){"use strict";function t(e){const t=$(document.cookie,"; ").find(t=>{const{name:r}=i(t);return r===e});return!!t&&i(t).value}function i(e){const[t,...i]=$(e,"=");return{name:t,value:V(i)>0&&decodeURIComponent(i.join("="))}}var r=Object.keys({AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"}),s="",n="/",a="POST",o="__Host-cc-AuthToken",d="__Host-Cc-Session-Cookie",l="X-Cc-Session";function h(e){const t=e?.headers.get(l);t&&function(e,t,i={}){if(0===V(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===V(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const r=[`${e}=${encodeURIComponent(t)}`];i?.expires&&i?.expires instanceof Date&&r.push("expires="+i.expires.toUTCString()),i.maxAge&&r.push(`maxAge=${i.maxAge}`),i?.sameSite&&"string"==typeof i?.sameSite&&r.push(`SameSite=${i?.sameSite}`),i?.path&&r.push(`path=${i?.path}`),i?.domain&&r.push(`domain=${i?.domain}`),i?.httpOnly&&r.push("HttpOnly"),i?.secure&&r.push("Secure");const s=r.join("; ");document.cookie=s}(d,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function c(e,t=!1,i){return h(this),t||this&&401===this.status&&(location.href=function(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),r=new URL(e,i);for(const[s,n]of Object.entries(t))r.searchParams.set(s,n);return r.toString()}("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),i?.(),{message:e,succeeded:!1}}function u(e,t){return h(this),t?.(),{data:e,succeeded:!0}}function p(e=[],i="GET"){const r="application/json",s=new Headers({Accept:r,"Content-Type":r});for(const[t,o]of e)s.set(t,o);const n=t(d);n&&s.set(l,n);const a=t(o);return a&&s.set("Authorization",a),{method:i,headers:s}}var g=null,m={block:"center",behavior:"smooth"};function f(e,t,i,r){if(e)return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function C(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):g}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function b(e){return JSON.stringify(e)}function P(e){return e.trim()}function y(e){return e.replace(/\D+/g,s)}function V(e){return e.length}function S(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function v(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function R(){return/^\d{5}-\d{3}$/}function A(){return/^\d{2}\/\d{2}\/\d{4}$/}function M(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function w(){return/^(\w{2,})(\s+(\w+))+$/}function N(e){return e instanceof HTMLInputElement}function E(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,s).replace(/[\u200B-\u200D\uFEFF]/g,s).replace(/[\u2060\u034F]/g,s)}function F(e,t){e&&e.focus(t)}function D(e,t){e&&e.scrollIntoView(t)}function $(e,t,i){return e.split(t,i)}function k(e){return e===g}function I(e,t){return("function"==typeof e?e():e).test(t)}function _(e,t,i=!0){return i?e.push(t):-1}function O(e,t){return e.includes(t)}var T=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function j(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const r=[];for(const s of[t,i])_(r,s,s);return r.join("-")})}function B(){return!1!==t(o)?"user":"guest"}var H="ticket",L="creditcard",x=new Event("input"),G=new Event("blur"),z=new WeakMap,U=e=>{const t=z.get(e);t&&(t(),z.delete(e))};function J(...e){return{mounted(t,i){const r=i.arg??"input",n=f(t,r,i=>{if(!i.isTrusted)return;const r=i.target;r.value=e.reduce((e,t)=>t(e),r.value??s),t.dispatchEvent(x)});z.set(t,n)},unmounted:U}}var Z=[10,11],q="same",Y="diff",K="20133";function W(e){switch(e){case"03298":return"PAC";case"03220":return"Sedex";case K:return"Impresso";default:return"ERROR"}}var X,Q="https://xef5-44zo-gegm.b2.xano.io/api:vvvJTKZJ",ee=(X=document.currentScript)?X.getAttribute("data-public-key"):g;if(k(ee))throw new Error("`Public key was not provided");function te(e,t){return{method:e,label:t}}function ie(e,t){return{token:e,label:t}}function re(e,t,i=!1){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function se({cep:e,signal:t}){const i="Não foi possível encontrar o endereço";try{const r=await fetch(`${Q}/address`,{...p([],a),signal:t,priority:"high",body:b({cep:y(e)})});if(!r.ok){const e=await r.json();return c.call(r,e?.code??i)}const s=await r.json();return u.call(r,s)}catch(r){return c(i)}}var ne=e.defineComponent({name:"CheckoutComponent",setup:()=>({customerCPF:e.ref(s),customerMail:e.ref(s),customerPhone:e.ref(s),customerBirthDate:e.ref(s),customerCreditCardHolder:e.ref(s),customerCreditCardNumber:e.ref(s),customerCreditCardDate:e.ref(s),customerCreditCardCVV:e.ref(s),billingCEP:e.ref(s),billingAddress:e.ref(s),billingNumber:e.ref(s),billingComplement:e.ref(s),billingNeighborhood:e.ref(s),billingCity:e.ref(s),billingState:e.ref(s),shippingRecipient:e.ref(s),shippingCEP:e.ref(s),shippingAddress:e.ref(s),shippingNumber:e.ref(s),shippingComplement:e.ref(s),shippingNeighborhood:e.ref(s),shippingCity:e.ref(s),shippingState:e.ref(s),customerMailRef:e.ref(g),customerBirthDateRef:e.ref(g),customerCPFRef:e.ref(g),customerPhoneRef:e.ref(g),paymentMethodMessageRef:e.ref(g),customerCreditCardHolderRef:e.ref(g),customerCreditCardNumberRef:e.ref(g),customerCreditCardDateRef:e.ref(g),customerCreditCardCVVRef:e.ref(g),billingCEPRef:e.ref(g),billingAddressRef:e.ref(g),billingNumberRef:e.ref(g),billingNeighborhoodRef:e.ref(g),billingCityRef:e.ref(g),billingStateRef:e.ref(g),deliveryPlaceMessageRef:e.ref(g),shippingRecipientRef:e.ref(g),shippingCEPRef:e.ref(g),shippingAddressRef:e.ref(g),shippingNumberRef:e.ref(g),shippingNeighborhoodRef:e.ref(g),shippingCityRef:e.ref(g),shippingStateRef:e.ref(g),installmentsMessageRef:e.ref(g),shippingMethodMessageRef:e.ref(g),generalErrorMessageRef:e.ref(g),deliveryBillingAddressErrorMessage:e.ref(g),deliveryPlaceAddressErrorMessage:e.ref(g),installment:e.shallowRef(g),errorMessage:e.ref(g),paymentMethods:e.shallowRef([te(L,"Cartão de crédito"),te(H,"Boleto"),te("pix","PIX")]),deliveryPlaces:e.shallowRef([ie(q,"Mesmo endereço de cobrança do cartão"),ie(Y,"Entregar em um endereço diferente")]),debouncedOrderPrice:g}),data:()=>({submitted:!1,isPagSeguroLoaded:!1,cart:g,deliveryPlace:g,selectedPaymentMethod:g,selectedShippingMethod:g,selectedInstallmentOption:g,isSubscriber:!1,visitedFields:[],detailedShipping:g,hasPendingPayment:!1,couponCode:g}),created(){this.getData({cep:localStorage.getItem("contra_corrente_cep")}).then(e=>{if(!e.succeeded)return;const{user:t,cart:i,address:r,detailed_shipping:n}=e.data;t&&(this.customerMail=t.email,this.customerCPF=t.cpf??s,this.customerPhone=t.phone??s,this.customerBirthDate=t.birthDate??s,this.isSubscriber=t.is_subscriber,this.shippingRecipient=t.name),r&&(this.shippingCEP=j(r.cep),this.shippingAddress=r.logradouro,this.shippingNeighborhood=r.bairro,this.shippingCity=r.localidade,this.shippingState=r.uf),n&&(this.detailedShipping=n),this.cart=i,this.$watch("shippingCEP",async(e,t,i)=>{if(!I(R,e))return;const r=new AbortController;i(()=>r.abort()),await this.captureAddress("shipping",e,t,r.signal)||D(this.shippingCEPRef,m)})}),this.debouncedOrderPrice=function(e,t=500){let i=g;return function(...r){i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,r)},t)}}(()=>{this.refreshInstallments()},500)},methods:{async getData({cep:e}){const t="Houve uma falha ao inicializar o checkout",i=new URL(`${Q}/checkout/${B()}`);e&&i.searchParams.set("cep",e);try{const e=await fetch(i,{...p(),priority:"high"});if(!e.ok){const i=await e.json();return c.call(e,i?.message??t)}const r=await e.json();return u.call(e,r)}catch(r){return c(t)}},async getShippingPriceAndDeadline(e){const t="Houve uma falha ao buscar os dados de entrega";try{const i=await fetch(`${Q}/get_delivery_price_deadline`,{...p([],a),body:b({cep:e})});if(!i.ok){const e=await i.json();return c.call(i,e?.message??t)}const r=await i.json();return u.call(i,r)}catch(i){return c(t)}},setSelectedPaymentMethod(e){this.selectedPaymentMethod!==e&&(e!==L?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguroLibrary(),this.deliveryPlace=g,this.selectedPaymentMethod=e)},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===q&&I(R,this.billingCEP)&&this.isBillingAddressGroupValid?se({cep:y(this.billingCEP)}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=e.message)}):this.deliveryPlaceAddressErrorMessage=g,this.deliveryPlace=e)},setDeliveryMethod(e){this.selectedShippingMethod=e},clearCreditCardData(){this.customerCreditCardHolder=s,this.customerCreditCardNumber=s,this.customerCreditCardDate=s,this.customerCreditCardCVV=s},isVisitedField(e){return O(this.visitedFields,e)},setVisitedField(e){return _(this.visitedFields,e,!this.isVisitedField(e))},triggerValidations(){const{notIgnoredFields:e}=this;for(const{field:t}of e)N(t)&&t.dispatchEvent(G)},async handlePayment(e){e.preventDefault();const{hasPendingPayment:t,selectedPaymentMethod:i}=this;if(t)return;if(this.triggerValidations(),!this.submitted)return this.submitted=!0,this.$nextTick(()=>this.handlePayment(e));const{firstInvalidField:r}=this;if(r&&r.field){const{field:e}=r;return D(e,m),void(N(e)&&setTimeout(F,500,e,{preventScroll:!1}))}this.hasPendingPayment=!C(!0);const s=await this.handlePostPayment(i);if(!s.succeeded)return this.errorMessage=s.message,this.hasPendingPayment=!C(!1),this.$nextTick(()=>{D(this.generalErrorMessageRef,m),setTimeout(()=>{this.errorMessage=g},5e3)});localStorage.removeItem("editora_contracorrente_cart_items")},async handlePostPayment(e){const t="Houve uma falhar ao finalizar o seu pedido",{couponCode:i,deliveryPlace:r,selectedShippingMethod:s,isCreditCard:n,customerCreditCardHolder:o,shippingRecipient:d,customerCPF:l,customerMail:h,customerPhone:g,customerBirthDate:m}=this;try{const f=await fetch(`${Q}/payment/process/${e}/${B()}`,{...p([],a),body:b({...!k(i)&&{coupon_code:i},...!k(r)&&{delivery_place:r},shipping_method:s,customer:{name:n?o:d,cpf:l,email:h,phone:g,birthDate:m,...this.getParsedAddresses},...e===L&&{credit_card_info:this.creditCardAdditionalInfo}})});if(!f.ok){const e=await f.json();return c.call(f,e?.message??t)}const C=await f.json();return u.call(f,C)}catch(f){return c(t)}},loadPagSeguroLibrary(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},async getInstallments(){const e="Falha ao capturar o parcelamento",t=B();try{const i=await fetch(`${Q}/calculate_fees/${t}`,{...p([],a),priority:"high",body:b({amount:this.getOrderPrice,cardbin:y(this.customerCreditCardNumber).slice(0,8)})});if(!i.ok){const t=await i.json();return c.call(i,t?.message??e)}const r=await i.json();return u.call(i,r)}catch(i){return c(e)}},async captureAddress(e,t,i,r){if(!I(R,t)||t===i)return!1;const s=`${e}CEP`,n=await se({cep:t,signal:r});return n.succeeded?(this[`${e}Address`]=n.data.logradouro,this[`${e}Neighborhood`]=n.data.bairro,this[`${e}State`]=n.data.uf,this[`${e}City`]=n.data.localidade,!0):(this.setVisitedField(s),this.clearAddress(e),!1)},clearAddress(e){this[`${e}CEP`]=s,this[`${e}Address`]=s,this[`${e}Neighborhood`]=s,this[`${e}State`]=s,this[`${e}City`]=s},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=g;const e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){this.selectedInstallmentOption!==e&&(this.selectedInstallmentOption=e)}},computed:{hasSelectedPaymentMethod(){return!k(this.selectedPaymentMethod)},isCreditCard(){return this.selectedPaymentMethod===L},hasSelectedDeliveryPlace(){return!k(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===q},isDiffAddress(){return this.deliveryPlace===Y},installmentPrice(){const{installment:e,selectedInstallmentOption:t}=this;if(!e||!t)return 0;const i=e.find(e=>e.installments===t);return i?.installment_value??0},hasSelectedAddress(){return!k(this.deliveryPlace)},renderedProducts(){const{cart:e,betterPriceSystem:t}=this;return e?e.items.map(({quantity:e,image_url:i,name:r,slug:s,...n})=>{const a=n[t];return{name:r,slug:s,quantity:e,price:T.format(a/100),final_price:T.format(Math.round(a*e)/100),image_style:`background-image: url('${i}')`}}):[]},isPersonalDataValid(){const{submitted:e,customerMailValidation:t,customerBirthDateValidation:i,customerCPFValidation:r,customerPhoneValidation:s}=this;return!e||[t,i,r,s].every(Boolean)},customerMailValidation(){return re(this.customerMailRef,!this.isVisitedField("customerMail")||I(S,this.customerMail))},customerBirthDateValidation(){const{customerBirthDate:e}=this;return re(this.customerBirthDateRef,!this.isVisitedField("customerBirthDate")||I(A,e)&&function(e){const[t,i,r]=$(e,n),s=new Date(`${r}-${i}-${t}T00:00:00`);if("Invalid Date"===s.toString())return!1;const a=s.getUTCDate()===Number(t),o=s.getUTCMonth()+1===Number(i),d=s.getUTCFullYear()===Number(r);return a&&o&&d}(e))},customerCPFValidation(){const{customerCPF:e}=this;return re(this.customerCPFRef,!this.isVisitedField("customerCPF")||I(M,e)&&function(e){if(11!==V(e=y(e))||I(/^(\d)\1{10}$/,e))return!1;const t=Z.map((t,i)=>{const r=i?10:9,s=11-[...e.slice(0,r)].map(Number).reduce((e,i,r)=>e+i*(t-r),0)%11;return s>9?0:s});return e.endsWith(t.join(s))}(e))},customerPhoneValidation(){return re(this.customerPhoneRef,!this.isVisitedField("customerPhone")||I(v,this.customerPhone))},paymentMethodValidation(){return re(this.paymentMethodMessageRef,this.hasSelectedPaymentMethod)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},customerCreditCardHolderValidation(){return re(this.customerCreditCardHolderRef,!this.isVisitedField("customerCreditCardHolder")||I(w,P(this.customerCreditCardHolder)),!this.isCreditCard)},customerCreditCardNumberValidation(){return re(this.customerCreditCardNumberRef,!this.isVisitedField("customerCreditCardNumber")||I(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,this.customerCreditCardNumber),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return re(this.customerCreditCardDateRef,!this.isVisitedField("customerCreditCardDate")||I(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=$(e,n);if(2!==V(t))return!1;const[i,r]=t,s=parseInt(i,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a)||s<1||s>12)return!1;const o=new Date;return new Date(2e3+(a<100?a:0),s,0,23,59,59)>o}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return re(this.customerCreditCardCVVRef,!this.isVisitedField("customerCreditCardCVV")||I(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isBillingAddressGroupValid(){return k(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},billingCEPValidation(){return re(this.billingCEPRef,!this.isVisitedField("billingCEP")||I(R,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return re(this.billingAddressRef,!this.isVisitedField("billingAddress")||V(this.billingAddress)>2,!this.isCreditCard)},billingNumberValidation(){return re(this.billingNumberRef,!this.isVisitedField("billingNumber")||V(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return re(this.billingNeighborhoodRef,!this.isVisitedField("billingNeighborhood")||V(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return re(this.billingCityRef,!this.isVisitedField("billingCity")||V(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return re(this.billingStateRef,!this.isVisitedField("billingState")||O(r,this.billingState),!this.isCreditCard)},deliveryPlaceValidation(){return re(this.deliveryPlaceMessageRef,this.hasSelectedDeliveryPlace&&k(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return re(this.shippingRecipientRef,!this.isVisitedField("shippingRecipient")||I(/^(\w{2,})(\s+(\w+))+$/,E(this.shippingRecipient)),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return re(this.shippingCEPRef,!this.isVisitedField("shippingCEP")||I(R,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return re(this.shippingAddressRef,!this.isVisitedField("shippingAddress")||V(this.shippingAddress)>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return re(this.shippingNumberRef,!this.isVisitedField("shippingNumber")||V(this.shippingNumber)>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return re(this.shippingNeighborhoodRef,!this.isVisitedField("shippingNeighborhood")||V(this.shippingNeighborhood)>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return re(this.shippingCityRef,!this.isVisitedField("shippingCity")||V(this.shippingCity)>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return re(this.shippingStateRef,!this.isVisitedField("shippingState")||O(r,this.shippingState),!this.shouldValidateShippingAddress)},installmentGroupValidation(){return re(this.installmentsMessageRef,!k(this.selectedInstallmentOption),!this.isCreditCard||!this.paymentMethodValidation.valid)},shippingMethodValidation(){return re(this.shippingMethodMessageRef,!k(this.selectedShippingMethod),!this.showShippingMethod)},shouldValidateShippingAddress(){return!this.isCreditCard||this.hasSelectedDeliveryPlace&&!this.isSameAddress},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthDateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.shippingMethodValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>!e)},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??g},deliveryOptions(){const{detailedShipping:e}=this;return k(e)?[]:e.map(({coProduto:e,pcFinal:t,prazoEntrega:i})=>{const r=e===K?"entre 20 e 40 dias":`${i} dias`;return{coProduto:e,label:[W(e),T.format(t/100),r].join(" | ")}})},hasShippingDetails(){return e=this.detailedShipping,Array.isArray(e)&&V(this.detailedShipping)>0;var e},showShippingMethod(){const{isCreditCard:e,hasShippingDetails:t,selectedPaymentMethod:i,hasSelectedDeliveryPlace:r}=this;return!k(i)&&(t&&O(["pix",H],i)||e&&r)},getParsedAddresses(){const e=e=>O(r,e)?e:s,t=e=>P(e).replace(/-+/g,s),i=t(this.shippingComplement),n={zipPostalCode:y(this.shippingCEP),street:this.shippingAddress,number:this.shippingNumber,neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState),...i&&{complement:i}},a=t(this.billingComplement),o={zipPostalCode:y(this.billingCEP),street:this.billingAddress,number:this.billingNumber,neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState),...a&&{complement:a}};return this.isCreditCard?{billingaddress:o,shippingaddress:this.isDiffAddress?n:o}:{shippingaddress:n}},creditCardAdditionalInfo(){const{installmentPrice:e,getCreditCardToken:t,customerCreditCardHolder:i,selectedInstallmentOption:r}=this;return{holderName:i,creditCardToken:t.encryptedCard??s,numberOfPayments:r,installmentValue:e}},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:g};if(!I(/^\d{2}\/\d{2}$/,this.customerCreditCardDate)||V(this.customerCreditCardCVV)<3)return{errors:[],hasErrors:!1,encryptedCard:g};const{customerCreditCardCVV:e,customerCreditCardHolder:t,customerCreditCardNumber:i}=this,[r,s]=$(this.customerCreditCardDate,n),a=1e3*Math.floor((new Date).getFullYear()/1e3);return window.PagSeguro.encryptCard({expMonth:r,expYear:(a+parseInt(s)).toString(),holder:t,securityCode:e,number:y(i),publicKey:ee})},showInstallmentSection(){return this.isCreditCard&&V(this.installment??[])>0},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:T.format(t/100)})):[]},betterPriceSystem:()=>"price",showDeliveryPrice(){return V(this.deliveryOptions)>0&&!k(this.selectedShippingMethod)},getOrderSubtotal(){const{cart:e,betterPriceSystem:t}=this;if(!e)return 0;const{order_price:i,order_full_price:r}=e;return{price:i,full_price:r}[t]},getOrderSubtotalFormatted(){return T.format(this.getOrderSubtotal/100)},getOrderPrice(){return function(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}([this.getOrderSubtotal,this.getShippingPrice].reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return T.format(this.getOrderPrice/100)},getShippingPrice(){const{detailedShipping:e,selectedShippingMethod:t}=this;if(!e||!t)return 0;const i=e.find(e=>e.coProduto===t);return i?i.pcFinal:0},getShippingPriceFormatted(){return T.format(this.getShippingPrice/100)}},watch:{async billingCEP(e,t,i){if(!I(R,e))return;const r=new AbortController;i(()=>r.abort()),await this.captureAddress("billing",e,t,r.signal)||D(this.billingCEPRef,m)},getOrderPrice:{immediate:!0,handler:function(){this.debouncedOrderPrice?.()}},getCreditCardToken(e,t){e.hasErrors||e.hasErrors===t.hasErrors||this.refreshInstallments()}},directives:{trim:J(P),numbersOnly:J(y),visitedField:{mounted(e,{value:t,instance:i}){const r=f(e,"blur",()=>{i.setVisitedField(t),z.delete(e)},{once:!0});z.set(e,r)},unmounted:U},maskDate:J(y,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,r)=>[t,i,r].filter(Boolean).join(n))}),maskCpf:J(y,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,r,n)=>{const a=[];return _(a,`${t}`,t),_(a,`.${i}`,i),_(a,`.${r}`,r),_(a,`-${n}`,n),a.join(s)})}),maskPhone:J(y,function(e){const t=(e,t,i,r)=>{const n=[];return _(n,`(${t}`,t),_(n,`) ${i}`,i),_(n,`-${r}`,r),n.join(s)};return V(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),uppercase:J(function(e){return e.toUpperCase()}),normalize:J(E),removeDuplicatedSpaces:J(function(e){return e.replace(/\s{2,}/g," ")}),maskCreditCardNumber:J(y,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,r,s)=>{const n=[];for(const a of[t,i,r,s])_(n,a,a);return n.join(" ")})}),maskCreditCardDate:J(y,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const r=[];for(const s of[t,i])_(r,s,s);return r.join(n)})}),maskCep:J(y,j)}});e.createApp(ne).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}(Vue);