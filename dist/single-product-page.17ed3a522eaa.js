!function(){"use strict";var e="https://xef5-44zo-gegm.b2.xano.io",t="__Host-cc-AuthToken",n="__Host-Cc-Session-Cookie",r="X-Cc-Session";function o(e){const t=e?.headers.get(r);t&&function(e,t,n={}){if(0===w(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===w(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const r=[`${e}=${encodeURIComponent(t)}`];n?.expires&&n?.expires instanceof Date&&r.push("expires="+n.expires.toUTCString()),n.maxAge&&r.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&r.push(`SameSite=${n?.sameSite}`),n?.path&&r.push(`path=${n?.path}`),n?.domain&&r.push(`domain=${n?.domain}`),n?.httpOnly&&r.push("HttpOnly"),n?.secure&&r.push("Secure");const o=r.join(S);document.cookie=o}(n,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)})}function i(e,t=!1,n){return o(this),t||this&&401===this.status&&(location.href=v("/log-in",{redirect_to:encodeURIComponent(location.pathname+location.search)})),n?.(),{message:e,succeeded:!1}}function a(e,t){return o(this),t?.(),{data:e,succeeded:!0}}function s(e=[],o="GET"){const i="application/json",a=new Headers({Accept:i,"Content-Type":i});for(const[t,n]of e)a.set(t,n);const s=C(n);s&&a.set(r,s);const c=C(t);return c&&a.set("Authorization",c),{method:o,headers:a}}var c=null,u="oculto";function d(e,t=document){return t?t.querySelector(e):c}function l(e,t,n,r){if(e)return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function f(e,...t){e&&e.classList.add(...t)}function p(e,...t){e&&e.classList.remove(...t)}function h(e,t,n){return!!e&&e.classList.toggle(t,n)}function m(e,t){e&&(e.textContent="string"==typeof t?t:t.toString())}function v(e,t={}){const n=new URL(`${location.protocol}//${location.hostname}`),r=new URL(e,n);for(const[o,i]of Object.entries(t))r.searchParams.set(o,i);return r.toString()}function g(e){return e.replace(/\D+/g,"")}function w(e){return e.length}function y(){return/^\d{5}-\d{3}$/}function k(e,t,n){return e.split(t,n)}function b(e){return e===c}var S="; ";function C(e){const t=k(document.cookie,S).find(t=>{const{name:n}=P(t);return n===e});return!!t&&P(t).value}function P(e){const[t,...n]=k(e,"=");return{name:t,value:w(n)>0&&decodeURIComponent(n.join("="))}}function E(e,t,n){return e?t.push(n):-1}var L=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function _(e,t,n){return Math.max(e,Math.min(t,n))}var I={PRICE:"price",FULL_PRICE:"full_price"},R=location.pathname.split("/").at(-1);if(!R)throw new Error("Slug do produto não foi encontrado");var q=d("[data-sku-selector]");if(!q)throw new Error("Impossível realizar a seleção de SKUs");var x="strikethrough",D=q.parentElement,$=d("[data-wtf-sku-price]"),U=d("[data-wtf-sku-full-price]"),j=d("[data-wtf-trigger-add-cep]"),F=d("#spp-calculo-do-cep"),H=d("#spp-campo-de-cep"),O=d("#spp-mensagem-de-erro-campo-de-cep"),T=d("#spp-custo-do-frete-bloco"),A=d("#spp-custo-do-frete");d("[data-wtf-subscriber-view-price]");var B=d("#spp-custo-do-frete-mudar-cep");l(d("[data-wtf-quantity-minus]"),"click",e=>{N(-1)}),l(d("[data-wtf-quantity-plus]"),"click",e=>{N(1)}),l(j,"click",e=>{h(d("[data-wtf-trigger-add-cep-container]"),u,!0),p(F,u)}),l(H,"input",async e=>{if(!e.isTrusted)return;const t=e.target;if(!(t instanceof HTMLInputElement))return;const n=g(t.value).replace(/^(\d{0,5})(\d{0,3})/,(e,t,n)=>{const r=[];for(const o of[t,n])E(o,r,o);return r.join("-")});var r,o;t.value=n,z.shippingCEP=(o=n,("function"==typeof(r=y)?r():r).test(o)?g(n):c)});var z=new Proxy({selectedSku:c,shippingCEP:c,quantity:1,isSubscriber:!1,skus:[],isDeliveryLoading:!1,deliveryPrice:c},{get(e,t){switch(t){case I.PRICE:case I.FULL_PRICE:{const e=G();return e?e[t]/100:0}case"singleItemPrice":{const t=G();if(!t)return 0;const{[I.PRICE]:n,[I.FULL_PRICE]:r}=t,o=_(0,1,.7);return e.isSubscriber?M(r,n)?n:r*o:n}case"final_price":{const{quantity:t,deliveryPrice:n}=e,r=n??0;return(z.singleItemPrice*t+r)/100}case"hasSamePrices":{const e=G();return!!e&&e[I.PRICE]===e[I.FULL_PRICE]}}return Reflect.get(e,t)},set(e,t,n){const r=Reflect.set(e,t,n);switch(t){case"selectedSku":!function(){const e=document.createDocumentFragment();for(const t of z.skus){const n=q.cloneNode(!0),r=t.sku_id===z.selectedSku;m(n,t.variation_type),h(n,"selecionado",r),l(n,"click",e=>{e.preventDefault(),e.stopPropagation(),r||(z.selectedSku=t.sku_id,1!==z.quantity&&(z.quantity=1))}),e.appendChild(n)}D.replaceChildren(e)}(),function(){const{price:e,full_price:t,isSubscriber:n,hasSamePrices:r,singleItemPrice:o}=z;m($,L.format(e)),m(U,L.format(r?0:t));const i=M(t,e),a=h(d("[data-wtf-full-price-view]"),u,n&&r);h($,x,n&&i),h(d("[data-wtf-price-view]"),u,n&&(!r||i)),h($,x,n&&a),h(d("[data-wtf-subscriber-view-price]"),u,!n),m(d("[data-wtf-sku-subscriber-price]"),L.format(o/100))}(),K();break;case"quantity":{m(d("[data-wtf-quantity-value]"),z.quantity),K();const{shippingCEP:t}=e;b(t)||8!==w(t)||J()}break;case"shippingCEP":J();break;case"isDeliveryLoading":break;case"deliveryPrice":p(T,u),m(A,L.format(n/100)),l(B,"click",e=>{e.isTrusted&&(H&&(H.value=""),z.shippingCEP=c,f(O,u),p(F,u),f(T,u),m(A,L.format(0)))},{once:!0}),K();break;case"isSubscriber":K()}return r}});function M(e,t){return e*_(0,1,.7)>=t}function N(e){if(navigator.vibrate?.([200,80,200,80,300]),z.isDeliveryLoading)return void navigator.vibrate?.([200,80,200,80,300]);const t=G();if(!t)throw new Error("SKU was not specified");const n=_(1,10,_(1,z.quantity+e,t.inventory));n!==z.quantity&&(z.quantity=n)}function K(){m(d("[data-wtf-sku-final-price]"),L.format(z.final_price))}function G(){const{skus:e,selectedSku:t}=z;return e.find(e=>t===e.sku_id)}async function J(){if(z.isDeliveryLoading)return;const{quantity:t,shippingCEP:n}=z;if(b(n)||!R)throw new Error("Invalid parameters provided to `getDeliveryInfo` function");const r=await async function(t){const n="Houve uma falha ao buscar os dados de entrega";z.isDeliveryLoading=!0;try{const o=await fetch(`${e}/api:_4BO6C7F/delivery-price`,{...s([],"POST"),body:(r=t,JSON.stringify(r))});if(!o.ok){const e=await o.json();return i.call(o,e?.message??n,!0)}const c=await o.json();return a.call(o,c)}catch(o){return i(n)}finally{z.isDeliveryLoading=!1}var r}({quantity:t,cep:n,product_slug:R});if(f(F,u),!r.succeeded)return m(O,r.message),void p(O,u);z.deliveryPrice=r.data.pcFinal}var X=[async function(t){const n="Houve uma falha ao buscar os dados do usuário";try{const r=await fetch(`${e}/api:_4BO6C7F/product/${t}`,{...s()});if(!r.ok){const e=await r.json();return i.call(r,e?.message??n,!0)}const o=await r.json();return a.call(r,o)}catch(r){return i(n)}}(R).then(function(e){e.succeeded?(z.skus=e.data.skus,z.selectedSku=e.data.skus.at(0)?.sku_id??c):location.href=v("/",{reason:"product_not_founded"})})];C(t)&&X.push(async function(){const t="Houve uma falha ao buscar os dados do usuário";try{const n=await fetch(`${e}/api:_4BO6C7F/user`,{...s()});if(!n.ok){const e=await n.json();return i.call(n,e?.message??t,!0)}const r=await n.json();return a.call(n,r)}catch(n){return i(t)}}().then(function(e){e.succeeded&&(z.isSubscriber=e.data.subscriber)})),Promise.allSettled(X),window.addEventListener("pageshow",e=>{e.persisted&&location.reload()})}();